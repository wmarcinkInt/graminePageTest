

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>How to write documentation &mdash; Gramine  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/gramine.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Management Team" href="../management-team.html" />
    <link rel="prev" title="Coding style guidelines" href="coding-style.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/gramine_logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Ready-made protected applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../curated-installation.html">Ready-made confidential protected images</a></li>
</ul>
<p class="caption"><span class="caption-text">Protect your container</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gsc-installation.html">Gramine Shielded Containers</a></li>
</ul>
<p class="caption"><span class="caption-text">Protect your application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Gramine installation options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environment-setup.html">Set up the Gramine environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run-sample-application.html">Run a sample application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-index.html">Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">Develop Gramine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="building.html">Build and install Gramine from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging Gramine with GDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="new-syscall.html">Implementing new system call</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging and distributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Gramine features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pal/host-abi.html">PAL host ABI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts-index.html">Concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribute to Gramine</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to Gramine</a></li>
<li class="toctree-l1"><a class="reference internal" href="onboarding.html">Onboarding</a></li>
<li class="toctree-l1"><a class="reference internal" href="DCO/index.html">Developer Certificate of Origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Development setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding-style.html">Coding style guidelines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to write documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-documentation">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preferred-rest-style">Preferred reST style</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preferred-doxygen-style">Preferred Doxygen style</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-reading">Further reading</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../management-team.html">Management Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gramine-users.html">Users of Gramine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Gramine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>How to write documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/devel/howto-doc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">


           <div itemprop="articleBody">
            
  <div class="section" id="how-to-write-documentation">
<span id="howto-doc"></span><h1>How to write documentation<a class="headerlink" href="#how-to-write-documentation" title="Permalink to this headline">¶</a></h1>
<p>Gramine uses <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> to generate the documentation in HTML form. The
documentation is hosted on Read The Docs at <a class="reference external" href="https://gramine.readthedocs.io/">https://gramine.readthedocs.io/</a>.
Documentation is generally written as <a class="reference external" href="https://en.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> files which are placed
in <code class="docutils literal notranslate"><span class="pre">Documentation/</span></code> directory. See <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">Sphinx’ reST primer</a> for short
introduction into syntax.</p>
<p>For code written in&nbsp;C, we use <a class="reference external" href="http://www.doxygen.nl/">Doxygen</a> and <a class="reference external" href="https://breathe.readthedocs.io/en/latest/">Breathe</a>, which is
a&nbsp;Sphinx’ plugin for including Doxygen documentation. Documentation of
C&nbsp;language API should be written as Doxygen comments (see <a class="reference external" href="http://www.doxygen.nl/manual/docblocks.html">Doxygen manual</a>)
and then included in one of the <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files (with appropriate description)
using one of the <a class="reference external" href="https://breathe.readthedocs.io/en/latest/directives.html">Breathe directives</a>, like <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">doxygenfunction::</span></code> or <code class="docutils literal notranslate"><span class="pre">..</span>
<span class="pre">doxygenstruct::</span></code>.</p>
<p>The documentation should be written with <code class="docutils literal notranslate"><span class="pre">html</span></code> builder of Sphinx in mind. The
<code class="file docutils literal notranslate"><span class="pre">manpages/</span></code> subdirectory also targets <code class="docutils literal notranslate"><span class="pre">manpage</span></code> builder. Other builders
(like <code class="docutils literal notranslate"><span class="pre">latex</span></code>) may be considered in the future, but for now their output is
not published.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A&nbsp;note about terminology:</p>
<p><code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">latex</span></code> and <code class="docutils literal notranslate"><span class="pre">manpage</span></code>, and also others, are Sphinx “builders”:
<a class="reference external" href="https://www.sphinx-doc.org/en/master/man/sphinx-build.html#cmdoption-sphinx-build-b">https://www.sphinx-doc.org/en/master/man/sphinx-build.html#cmdoption-sphinx-build-b</a>.
Sphinx can output many different formats, some of them have overlapping usage
(both <code class="docutils literal notranslate"><span class="pre">html</span></code> and <code class="docutils literal notranslate"><span class="pre">latex</span></code> usually output full handbook, the difference is
screen vs print), some are specialized (<code class="docutils literal notranslate"><span class="pre">manpage</span></code> processes only selected
documents for man; those documents may or may not be also used by other
builders).</p>
<p class="last">When launched through <code class="docutils literal notranslate"><span class="pre">make</span></code> (like <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">Documentation</span> <span class="pre">html</span></code>), this
becomes “target” in Make terminology.</p>
</div>
<div class="section" id="building-documentation">
<h2>Building documentation<a class="headerlink" href="#building-documentation" title="Permalink to this headline">¶</a></h2>
<p>To build documentation, change directory to <code class="docutils literal notranslate"><span class="pre">Documentation</span></code>, install prerequisites, and use
<code class="docutils literal notranslate"><span class="pre">make</span></code>, specifying the appropriate target. The documentation is built with python3; if you have
similar packages in python2, it may create problems; we recommend removing any similar packages in
python2. Similarly, the documentation requires version 1.8 of sphinx.</p>
<p>The output is in the <code class="docutils literal notranslate"><span class="pre">_build</span></code> directory:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># change directory to Documentation</span>
<span class="nb">cd</span> Documentation

<span class="c1"># install prerequisites</span>
sudo apt-get install doxygen
python3 -m pip install -r requirements.txt

<span class="c1"># build targets &quot;html&quot; and &quot;man&quot;</span>
make html man

<span class="c1"># example: view html output</span>
firefox _build/html/index.html

<span class="c1"># example: view man output</span>
man _build/man/gramine-manifest.1
</pre></div>
</div>
</div>
<div class="section" id="preferred-rest-style">
<h2>Preferred reST style<a class="headerlink" href="#preferred-rest-style" title="Permalink to this headline">¶</a></h2>
<p>(This is adapted from <a class="reference external" href="https://devguide.python.org/documenting/#style-guide">Python’s style guide</a>).</p>
<ul>
<li><p class="first">Use 3-space tab in <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files to align the indentation with reST explicit
markup, which begins with two dots and a&nbsp;space.</p>
</li>
<li><p class="first">Wrap the paragraphs at 80th character. But don’t wrap verbatim text like logs
and use applicable style when wrapping code examples (see
<a class="reference internal" href="coding-style.html"><span class="doc">Coding style guidelines</span></a>).</p>
</li>
<li><p class="first">For headers, use Python convention for header hierarchy:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">#</span></code> with overline,</li>
<li><code class="docutils literal notranslate"><span class="pre">*</span></code> with overline,</li>
<li><code class="docutils literal notranslate"><span class="pre">=</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">-</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">^</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;</span></code>.</li>
</ol>
<p>Example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="gh">###################################</span>
<span class="gh">Very top level header (in TOC etc.)</span>
<span class="gh">###################################</span>

<span class="gh">*******************</span>
<span class="gh">Less than top level</span>
<span class="gh">*******************</span>

<span class="gh">Per-file header</span>
<span class="gh">===============</span>

<span class="gh">Section header</span>
<span class="gh">--------------</span>

<span class="gh">Subsection header</span>
<span class="gh">^^^^^^^^^^^^^^^^^</span>

<span class="gh">Subsubsection header</span>
<span class="gh">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>This means most documents use only <code class="docutils literal notranslate"><span class="pre">=</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> adornments.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>For vim users:</dt>
<dd><p class="first last">you can enter the <code class="docutils literal notranslate"><span class="pre">-</span></code> underlines using the key combination
<code class="docutils literal notranslate"><span class="pre">yypVr-</span></code> and the other adornments with similar combinations.</p>
</dd>
<dt>For Emacs users:</dt>
<dd><p class="first last">Read more at <a class="reference external" href="https://docutils.sourceforge.io/docs/user/emacs.html">https://docutils.sourceforge.io/docs/user/emacs.html</a>.</p>
</dd>
</dl>
</div>
</li>
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">|~|</span></code> to insert non-breaking space. This should be added after
one-letter words and where otherwise appropriate:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>This is a |~| function.
</pre></div>
</div>
<p>This substitution is added to all documents processed by Sphinx. For files
processed also by other software (like <code class="docutils literal notranslate"><span class="pre">README.rst</span></code>, which is both rendered
by GitHub and included in <code class="docutils literal notranslate"><span class="pre">index.rst</span></code>), use <code class="docutils literal notranslate"><span class="pre">|nbsp|</span></code> after adding this
substitution yourself:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">|nbsp|</span> <span class="ow">unicode</span><span class="p">::</span> 0xa0
   <span class="nc">:trim:</span>

This is a |nbsp| README.
</pre></div>
</div>
</li>
</ul>
<p>Documentation of the code should be organized into files by logical concepts,
as they fit into programmer’s mind. Ideally, this should match the source files,
if those files were organized correctly in the first place, but the reality may
be different. In case of doubt, place them as they fit the narrative of the
document, not as they are placed in the source files.</p>
<p>Documents should be grouped by general areas and presented using
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">toctree::</span></code> directive in <code class="file docutils literal notranslate"><span class="pre">index.rst</span></code> file. This causes them to be
included in TOC in the main document and also in sidebar on RTD.</p>
</div>
<div class="section" id="preferred-doxygen-style">
<h2>Preferred Doxygen style<a class="headerlink" href="#preferred-doxygen-style" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Prefer Qt-style <code class="docutils literal notranslate"><span class="pre">/*!</span></code> and <code class="docutils literal notranslate"><span class="pre">\param</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*!</span>
<span class="cm"> * \brief Sum two integers.</span>
<span class="cm"> *</span>
<span class="cm"> * \param first   First addend.</span>
<span class="cm"> * \param second  Second addend.</span>
<span class="cm"> *</span>
<span class="cm"> * \returns Sum of the arguments. Sometimes a longer description is needed, then it should be</span>
<span class="cm"> *          wrapped and aligned like this.</span>
<span class="cm"> *</span>
<span class="cm"> * Longer description goes here (only for functions complex enough to deserve it).</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">second</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>There is a |~| very special function <span class="na">:c:func:</span><span class="nv">`foo`</span>:

<span class="p">..</span> <span class="ow">doxygenfunction</span><span class="p">::</span> foo

It&#39;s an example function, but is documented!
</pre></div>
</div>
</li>
<li><p class="first">In reST, do not use <code class="docutils literal notranslate"><span class="pre">autodoxygen</span></code> directives, and especially do not use
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">doxygenfile::</span></code>, because documentation should be written as prose, not
a&nbsp;coredump. Write an explanation, how the things go together and place
the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">doxygenfunction::</span></code> directives where aproppriate.</p>
</li>
<li><p class="first">You can use <code class="docutils literal notranslate"><span class="pre">\rst</span></code> and <code class="docutils literal notranslate"><span class="pre">\endrst</span></code> to write reST in Doxygen comments:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*!</span>
<span class="cm"> * \brief An example function</span>
<span class="cm"> *</span>
<span class="cm"> * \rst</span>
<span class="cm"> * .. note::</span>
<span class="cm"> *</span>
<span class="cm"> *    This works!</span>
<span class="cm"> * \endrst</span>
<span class="cm"> */</span><span class="w"></span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="further-reading">
<h2>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.divio.com/blog/documentation/">Four kinds of documentation</a>
(<a class="reference external" href="https://news.ycombinator.com/item?id=21289832">HN thread</a>)</li>
<li><a class="reference external" href="https://docs-guide.readthedocs.io/en/latest/&gt;">The Hitchhiker’s Guide to Documentation</a> divided by audience (role in the
project), with references to good real-world examples</li>
</ul>
</div>
</div>


           </div>
           
          </div>

          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../management-team.html" class="btn btn-neutral float-right" title="Management Team" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="coding-style.html" class="btn btn-neutral float-left" title="Coding style guidelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Gramine Contributors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>